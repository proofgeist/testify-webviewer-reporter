{
  "AllTestCount": 6,
  "AllTests": [
    {
      "DESCRIPTION": "should have an enabledState property = 0",
      "GROUP": "fmPUBSUB API TEST PLAN",
      "NAME": "register subscriber with enabled state 'false'",
      "PARAMETER": {
        "enabledState": false,
        "listener": {
          "data-source-name": "fmPUBSUB_subtest",
          "script-name": "Callback"
        },
        "subscriberKey": "test.subscriber"
      },
      "PASS": true,
      "RESULT_ACTUAL": 0,
      "RESULT_EXPECTED": 0,
      "SCRIPT_RESULT": {
        "messages": [{ "code": 0, "message": "No error" }],
        "response": {
          "channelCount": 0,
          "channels": {},
          "enabledState": 0,
          "subscriberKey": "test.subscriber",
          "subscriptionType": ""
        }
      }
    },
    {
      "DESCRIPTION": "different",
      "GROUP": "fmPUBSUB API TEST PLAN",
      "NAME": "register subscriber with enabled state 'false'",
      "PARAMETER": {
        "enabledState": false,
        "listener": {
          "data-source-name": "fmPUBSUB_subtest",
          "script-name": "Callback"
        },
        "subscriberKey": "test.subscriber"
      },
      "PASS": true,
      "RESULT_ACTUAL": { "a": 1, "b": 2 },
      "RESULT_EXPECTED": {
        "a": 1,
        "b": 2
      },
      "SCRIPT_RESULT": {
        "messages": [{ "code": 0, "message": "No error" }],
        "response": {
          "channelCount": 0,
          "channels": {},
          "enabledState": 0,
          "subscriberKey": "test.subscriber",
          "subscriptionType": ""
        }
      }
    },
    {
      "DESCRIPTION": "should have an enabledState property = 1",
      "GROUP": "fmPUBSUB API TEST PLAN",
      "NAME": "set Subscriber enabled state to true",
      "PARAMETER": { "enabledState": true, "subscriberKey": "test.subscriber" },
      "PASS": true,
      "RESULT_ACTUAL": 1,
      "RESULT_EXPECTED": 1,
      "SCRIPT_RESULT": {
        "messages": [{ "code": 0, "message": "0" }],
        "response": { "enabledState": "1", "subscriberKey": "test.subscriber" }
      }
    },
    {
      "DESCRIPTION": "should have an subscriberKey property = test.subscriber",
      "GROUP": "fmPUBSUB API TEST PLAN",
      "NAME": "Subscribe to a channel",
      "PARAMETER": {
        "channel": "test.qbo.customer.updated",
        "subscriberKey": "test.subscriber"
      },
      "PASS": true,
      "RESULT_ACTUAL": "test.subscriber",
      "RESULT_EXPECTED": "test.subscriber",
      "SCRIPT_RESULT": {
        "messages": [{ "code": 0, "message": " No error" }],
        "response": {
          "enabledState": "1",
          "subscriberKey": "test.subscriber",
          "subscriptionID": "79CD4BD4-3E3D-47C9-9497-0416FC075DEF"
        }
      }
    },
    {
      "DESCRIPTION": "should have a 'response.messageQueue' array with 1 item",
      "GROUP": "fmPUBSUB API TEST PLAN",
      "NAME": "publish a message",
      "PARAMETER": {
        "channel": "test.qbo.customer.updated",
        "payload": { "firstName": "Bob" }
      },
      "PASS": true,
      "RESULT_ACTUAL": 1,
      "RESULT_EXPECTED": 1,
      "SCRIPT_RESULT": {
        "messages": [{ "code": 0, "message": "No Error" }],
        "response": { "messageQueue": ["E5720B27-F904-4068-B9BF-7BA498AD18BD"] }
      }
    },
    {
      "DESCRIPTION": "should have counts returned in 'response.data' with failed / success/ and total",
      "GROUP": "fmPUBSUB API TEST PLAN",
      "NAME": "process queue",
      "PARAMETER": {
        "channel": "test.qbo.customer.updated",
        "payload": { "firstName": "Bob" }
      },
      "PASS": true,
      "RESULT_ACTUAL": 1,
      "RESULT_EXPECTED": 1,
      "SCRIPT_RESULT": {
        "messages": [{ "code": 0, "message": " No error" }],
        "response": {
          "data": [{ "failed": 1, "skipped": 0, "success": 0, "total": 1 }]
        }
      }
    },
    {
      "DESCRIPTION": "should have an enabledState property = 0",
      "GROUP": "Otto Webhook Test",
      "NAME": "send a message via Otto Webhook",
      "PARAMETER": {
        "data": { "ok": "dokey" },
        "headers": {
          "Authorization": "Bearer KEY_Bl1nygTA0h3B7tyZpHtEK55nbNQ4lPrQACEtlML9RD1ufq",
          "Content-Type": "application/json"
        },
        "method": "POST",
        "url": "https://foundations-env.proof-cloud.com:3030/filereceiver/SimpleQ.fmp12/test.customer.update"
      },
      "PASS": false,
      "RESULT_ACTUAL": "",
      "RESULT_EXPECTED": 1,
      "SCRIPT_RESULT": {
        "body": "",
        "code": 0,
        "duration": "613 ms",
        "headers": {},
        "status": "",
        "trace": ""
      }
    }
  ],
  "FailingTestCount": 1,
  "FailingTests": [
    {
      "DESCRIPTION": "should have an enabledState property = 0",
      "GROUP": "Otto Webhook Test",
      "NAME": "send a message via Otto Webhook",
      "PARAMETER": {
        "data": { "ok": "dokey" },
        "headers": {
          "Authorization": "Bearer KEY_Bl1nygTA0h3B7tyZpHtEK55nbNQ4lPrQACEtlML9RD1ufq",
          "Content-Type": "application/json"
        },
        "method": "POST",
        "url": "https://foundations-env.proof-cloud.com:3030/filereceiver/SimpleQ.fmp12/test.customer.update"
      },
      "PASS": false,
      "RESULT_ACTUAL": "",
      "RESULT_EXPECTED": 1,
      "SCRIPT_RESULT": {
        "body": "",
        "code": 0,
        "duration": "613 ms",
        "headers": {},
        "status": "",
        "trace": ""
      }
    }
  ]
}
